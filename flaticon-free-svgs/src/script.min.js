function init(){function e(){let e;if("number"==typeof icon_id)e=icon_id;else if("string"==typeof icon_id){e=document.querySelector(icon_id)?.getAttribute("value")}else{if(!(icon_id instanceof HTMLElement))return;e=icon_id.getAttribute("value")}fetch(`/editor/icon/svg/${e}?type=${RESOURCE_TYPE}`).then((e=>e.json())).then((e=>{const t=document.createElement("a"),n=document.querySelector("#keyword")?.getAttribute("value")||"download";t.href=e.url,t.download=`${n}.svg`,t.click()}))}if(document.querySelectorAll("div.download").forEach((t=>{const n=t.parentElement;if(!n.querySelector(".ayy")){const t=document.createElement("button");t.textContent="Pirate that shit (needs login)",t.className="ayy bj-button fullwidth",t.onclick=e,n.appendChild(t)}})),document.querySelector(".ayy2"))return;const t=document.querySelector("div.edit-icons-user-actions");if(t){const e=document.createElement("button");e.textContent="Pirate that shit",e.className="ayy2 bj-button mg-left-lv1",e.onclick=function(){const e=document.querySelector(".icon-holder");if(!e)return;let t=e.innerHTML;t=t.replace(/ \b(width|height)="[^"]*"/g,"");const n=`data:image/svg+xml,${encodeURIComponent(t)}`,o=document.createElement("a");o.href=n,o.download=document.querySelector("#keyword")?.getAttribute("value")+".svg",o.click()},t.insertAdjacentElement("afterend",e)}}init();const observer=new MutationObserver((()=>{document.querySelectorAll("div.download").forEach((e=>{e.parentElement.querySelector(".ayy")||init()}))}));observer.observe(document.body,{childList:!0,subtree:!0});